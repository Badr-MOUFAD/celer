
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lasso path computation on Finance/log1p dataset &#8212; celer 0.5.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          celer</a>
        <span class="navbar-text navbar-version pull-left"><b>0.5.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Examples</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="https://github.com/mathurinm/celer">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Lasso path computation on Finance/log1p dataset</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/auto_examples/plot_finance_path.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container content-container">
  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-plot-finance-path-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="lasso-path-computation-on-finance-log1p-dataset">
<span id="sphx-glr-auto-examples-plot-finance-path-py"></span><h1>Lasso path computation on Finance/log1p dataset<a class="headerlink" href="#lasso-path-computation-on-finance-log1p-dataset" title="Permalink to this headline">Â¶</a></h1>
<p>The example runs the Celer algorithm on the Finance dataset
which is a large sparse dataset.</p>
<p>Running time is not compared with the scikit-learn
implementation as it makes the example too long to run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">celer</span> <span class="kn">import</span> <a href="../generated/celer.celer_path.html#celer.celer_path" title="celer.celer_path" class="sphx-glr-backref-module-celer sphx-glr-backref-type-py-function"><span class="n">celer_path</span></a>
<span class="kn">from</span> <span class="nn">celer.datasets</span> <span class="kn">import</span> <span class="n">fetch_libsvm</span>

<span class="nb">print</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** Warning: this example may take more than 5 minutes to run ***&quot;</span><span class="p">)</span>
<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.html#scipy.sparse.csc_matrix" title="scipy.sparse.csc_matrix" class="sphx-glr-backref-module-scipy-sparse sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">y</span></a> <span class="o">=</span> <span class="n">fetch_libsvm</span><span class="p">(</span><span class="s1">&#39;finance&#39;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_samples</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_features</span></a> <span class="o">=</span> <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.shape.html#scipy.sparse.csc_matrix.shape" title="scipy.sparse.csc_matrix.shape" class="sphx-glr-backref-module-scipy-sparse sphx-glr-backref-type-py-method"><span class="n">X</span><span class="o">.</span><span class="n">shape</span></a>
<span class="n">alpha_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.dot.html#scipy.sparse.csr_matrix.dot" title="scipy.sparse.csr_matrix.dot" class="sphx-glr-backref-module-scipy-sparse sphx-glr-backref-type-py-method"><span class="n">X</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">dot</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">y</span></a><span class="p">)))</span> <span class="o">/</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_samples</span></a>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dataset size: </span><span class="si">%d</span><span class="s2"> samples, </span><span class="si">%d</span><span class="s2"> features&quot;</span> <span class="o">%</span> <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.shape.html#scipy.sparse.csc_matrix.shape" title="scipy.sparse.csc_matrix.shape" class="sphx-glr-backref-module-scipy-sparse sphx-glr-backref-type-py-method"><span class="n">X</span><span class="o">.</span><span class="n">shape</span></a><span class="p">)</span>

<span class="c1"># construct grid of regularization parameters alpha</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_alphas</span></a> <span class="o">=</span> <span class="mi">11</span>
<a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a> <span class="o">=</span> <span class="n">alpha_max</span> <span class="o">*</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.geomspace.html#numpy.geomspace" title="numpy.geomspace" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">geomspace</span></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_alphas</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>*** Warning: this example may take more than 5 minutes to run ***
Dataset: finance
Replace is False and data exists, so doing nothing. Use replace=True to re-download the data.
Dataset size: 16087 samples, 1668737 features
</pre></div>
</div>
<p>Run Celer on a grid of regularization parameters, for various tolerances:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-2</span><span class="p">,</span> <span class="mf">1e-4</span><span class="p">,</span> <span class="mf">1e-6</span><span class="p">]</span>
<a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span></a> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">zeros</span></a><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a><span class="p">)])</span>
<a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">gaps</span></a> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">zeros</span></a><span class="p">((</span><span class="nb">len</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="p">)))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting path computation...&quot;</span><span class="p">)</span>
<span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol_ix</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol</span></a> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a><span class="p">):</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">t0</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span><span class="o">.</span><span class="n">time</span></a><span class="p">()</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">res</span></a> <span class="o">=</span> <a href="../generated/celer.celer_path.html#celer.celer_path" title="celer.celer_path" class="sphx-glr-backref-module-celer sphx-glr-backref-type-py-function"><span class="n">celer_path</span></a><span class="p">(</span><a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.html#scipy.sparse.csc_matrix" title="scipy.sparse.csc_matrix" class="sphx-glr-backref-module-scipy-sparse sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">y</span></a><span class="p">,</span> <span class="s1">&#39;lasso&#39;</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="p">,</span>
                     <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol</span></a><span class="p">,</span> <span class="n">prune</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span></a><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol_ix</span></a><span class="p">]</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/time.html#time.time" title="time.time" class="sphx-glr-backref-module-time sphx-glr-backref-type-py-function"><span class="n">time</span><span class="o">.</span><span class="n">time</span></a><span class="p">()</span> <span class="o">-</span> <a href="https://docs.python.org/3/library/functions.html#float" title="builtins.float" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">t0</span></a>
    <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">_</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">coefs</span></a><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">gaps</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tol_ix</span></a><span class="p">]</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">res</span></a>


<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">labels</span></a> <span class="o">=</span> <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;\sc</span><span class="si">{Celer}</span><span class="s2">&quot;</span><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">figsize</span></a> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">results</span><span class="o">.</span><span class="n">T</span></a><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Celer&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xlabel.html#matplotlib.pyplot.xlabel" title="matplotlib.pyplot.xlabel" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span></a><span class="p">(</span><span class="s2">&quot;stopping tolerance&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.ylabel.html#matplotlib.pyplot.ylabel" title="matplotlib.pyplot.ylabel" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span></a><span class="p">(</span><span class="s2">&quot;path computation time (s)&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.tight_layout.html#matplotlib.pyplot.tight_layout" title="matplotlib.pyplot.tight_layout" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span></a><span class="p">()</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="matplotlib.pyplot.show" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">show</span></a><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="plot finance path" class="sphx-glr-single-img" src="../_images/sphx_glr_plot_finance_path_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Starting path computation...
##########################
##### Computing alpha 1/11
##########################
Iter 0: primal 0.5000000000, gap 0.00e+00
Early exit, gap: 0.00e+00 &lt; 1.00e-02
##########################
##### Computing alpha 2/11
##########################
Iter 0: primal 0.5000000000, gap 3.35e-02, 1 feats in subpb (1668737 left)
Iter 1: primal 0.4972375400, gap 2.40e-02, 2 feats in subpb (1668737 left)
Iter 2: primal 0.4955922519, gap 1.76e-02, 4 feats in subpb (75790 left)
Iter 3: primal 0.4944363884, gap 9.28e-03
Early exit, gap: 9.28e-03 &lt; 1.00e-02
##########################
##### Computing alpha 3/11
##########################
Iter 0: primal 0.4835895267, gap 5.44e-02, 4 feats in subpb (1668737 left)
Iter 1: primal 0.4779592492, gap 4.87e-02, 8 feats in subpb (1668737 left)
Iter 2: primal 0.4734102744, gap 1.83e-02, 16 feats in subpb (1668737 left)
Iter 3: primal 0.4719158780, gap 3.89e-03
Early exit, gap: 3.89e-03 &lt; 1.00e-02
##########################
##### Computing alpha 4/11
##########################
Iter 0: primal 0.4494757871, gap 3.43e-02, 15 feats in subpb (1668737 left)
Iter 1: primal 0.4447454080, gap 2.33e-02, 30 feats in subpb (1668737 left)
Iter 2: primal 0.4435232002, gap 5.02e-03
Early exit, gap: 5.02e-03 &lt; 1.00e-02
##########################
##### Computing alpha 5/11
##########################
Iter 0: primal 0.4180950716, gap 3.26e-02, 27 feats in subpb (1668737 left)
Iter 1: primal 0.4147116716, gap 2.92e-02, 52 feats in subpb (1668737 left)
Iter 2: primal 0.4134340694, gap 3.71e-03
Early exit, gap: 3.71e-03 &lt; 1.00e-02
##########################
##### Computing alpha 6/11
##########################
Iter 0: primal 0.3876228460, gap 2.74e-02, 42 feats in subpb (1668737 left)
Iter 1: primal 0.3849388309, gap 2.48e-02, 80 feats in subpb (1668737 left)
Iter 2: primal 0.3844713186, gap 1.89e-03
Early exit, gap: 1.89e-03 &lt; 1.00e-02
##########################
##### Computing alpha 7/11
##########################
Iter 0: primal 0.3602317706, gap 2.28e-02, 70 feats in subpb (1668737 left)
Iter 1: primal 0.3577100775, gap 2.03e-02, 138 feats in subpb (1668737 left)
Iter 2: primal 0.3569907369, gap 6.04e-03
Early exit, gap: 6.04e-03 &lt; 1.00e-02
##########################
##### Computing alpha 8/11
##########################
Iter 0: primal 0.3336553093, gap 2.80e-02, 120 feats in subpb (1668737 left)
Iter 1: primal 0.3305701173, gap 2.49e-02, 230 feats in subpb (1668737 left)
Iter 2: primal 0.3297151806, gap 5.67e-03
Early exit, gap: 5.67e-03 &lt; 1.00e-02
##########################
##### Computing alpha 9/11
##########################
Iter 0: primal 0.3066786725, gap 2.57e-02, 183 feats in subpb (1668737 left)
Iter 1: primal 0.3037446738, gap 2.28e-02, 362 feats in subpb (1668737 left)
Iter 2: primal 0.3029285049, gap 7.91e-03
Early exit, gap: 7.91e-03 &lt; 1.00e-02
###########################
##### Computing alpha 10/11
###########################
Iter 0: primal 0.2800622403, gap 2.63e-02, 295 feats in subpb (1668737 left)
Iter 1: primal 0.2774641715, gap 2.37e-02, 586 feats in subpb (1668737 left)
Iter 2: primal 0.2730094553, gap 1.92e-02, 974 feats in subpb (1668737 left)
Iter 3: primal 0.2726103572, gap 5.35e-03
Early exit, gap: 5.35e-03 &lt; 1.00e-02
###########################
##### Computing alpha 11/11
###########################
Iter 0: primal 0.2453726586, gap 1.87e-02, 816 feats in subpb (1668737 left)
Iter 1: primal 0.2397991550, gap 1.32e-02, 1600 feats in subpb (1668737 left)
Iter 2: primal 0.2391132633, gap 8.88e-03
Early exit, gap: 8.88e-03 &lt; 1.00e-02
##########################
##### Computing alpha 1/11
##########################
Iter 0: primal 0.5000000000, gap 0.00e+00
Early exit, gap: 0.00e+00 &lt; 1.00e-04
##########################
##### Computing alpha 2/11
##########################
Iter 0: primal 0.5000000000, gap 3.35e-02, 1 feats in subpb (1668737 left)
Iter 1: primal 0.4972375400, gap 2.40e-02, 2 feats in subpb (1668737 left)
Iter 2: primal 0.4955922519, gap 1.76e-02, 4 feats in subpb (75790 left)
Iter 3: primal 0.4944363884, gap 9.28e-03, 8 feats in subpb (4100 left)
Iter 4: primal 0.4936142970, gap 9.70e-04, 16 feats in subpb (91 left)
Iter 5: primal 0.4936030427, gap 1.57e-05
Early exit, gap: 1.57e-05 &lt; 1.00e-04
##########################
##### Computing alpha 3/11
##########################
Iter 0: primal 0.4804653192, gap 2.97e-02, 12 feats in subpb (1668737 left)
Iter 1: primal 0.4723477193, gap 1.51e-02, 24 feats in subpb (1668737 left)
Iter 2: primal 0.4718651251, gap 1.26e-04, 38 feats in subpb (54 left)
Iter 3: primal 0.4718634468, gap 1.42e-05
Early exit, gap: 1.42e-05 &lt; 1.00e-04
##########################
##### Computing alpha 4/11
##########################
Iter 0: primal 0.4491461081, gap 2.58e-02, 19 feats in subpb (1668737 left)
Iter 1: primal 0.4440727341, gap 1.59e-02, 38 feats in subpb (1668737 left)
Iter 2: primal 0.4434841929, gap 9.20e-04, 68 feats in subpb (773 left)
Iter 3: primal 0.4434772686, gap 1.62e-04, 70 feats in subpb (132 left)
Iter 4: primal 0.4434769879, gap 3.99e-05
Early exit, gap: 3.99e-05 &lt; 1.00e-04
##########################
##### Computing alpha 5/11
##########################
Iter 0: primal 0.4178039832, gap 2.32e-02, 35 feats in subpb (1668737 left)
Iter 1: primal 0.4136662883, gap 1.90e-02, 68 feats in subpb (1668737 left)
Iter 2: primal 0.4133898024, gap 5.58e-04, 96 feats in subpb (1167 left)
Iter 3: primal 0.4133867057, gap 1.31e-04, 96 feats in subpb (234 left)
Iter 4: primal 0.4133866253, gap 2.36e-05
Early exit, gap: 2.36e-05 &lt; 1.00e-04
##########################
##### Computing alpha 6/11
##########################
Iter 0: primal 0.3875986335, gap 2.11e-02, 48 feats in subpb (1668737 left)
Iter 1: primal 0.3848296261, gap 1.83e-02, 88 feats in subpb (1668737 left)
Iter 2: primal 0.3844717274, gap 1.13e-03, 144 feats in subpb (71615 left)
Iter 3: primal 0.3844579012, gap 1.83e-04, 148 feats in subpb (821 left)
Iter 4: primal 0.3844577127, gap 5.28e-05
Early exit, gap: 5.28e-05 &lt; 1.00e-04
##########################
##### Computing alpha 7/11
##########################
Iter 0: primal 0.3602248691, gap 1.96e-02, 73 feats in subpb (1668737 left)
Iter 1: primal 0.3576252779, gap 1.70e-02, 142 feats in subpb (1668737 left)
Iter 2: primal 0.3569305057, gap 3.86e-03, 248 feats in subpb (1668737 left)
Iter 3: primal 0.3568310593, gap 1.10e-03, 252 feats in subpb (1550444 left)
Iter 4: primal 0.3568255224, gap 3.31e-04, 250 feats in subpb (16169 left)
Iter 5: primal 0.3568247353, gap 8.31e-05
Early exit, gap: 8.31e-05 &lt; 1.00e-04
##########################
##### Computing alpha 8/11
##########################
Iter 0: primal 0.3330450237, gap 1.79e-02, 125 feats in subpb (1668737 left)
Iter 1: primal 0.3301633584, gap 1.50e-02, 242 feats in subpb (1668737 left)
Iter 2: primal 0.3295771653, gap 1.65e-03, 370 feats in subpb (1668737 left)
Iter 3: primal 0.3295597625, gap 3.86e-04, 390 feats in subpb (389925 left)
Iter 4: primal 0.3295591993, gap 8.43e-05
Early exit, gap: 8.43e-05 &lt; 1.00e-04
##########################
##### Computing alpha 9/11
##########################
Iter 0: primal 0.3063165929, gap 1.62e-02, 196 feats in subpb (1668737 left)
Iter 1: primal 0.3036161606, gap 1.35e-02, 388 feats in subpb (1668737 left)
Iter 2: primal 0.3029770819, gap 8.81e-03, 578 feats in subpb (1668737 left)
Iter 3: primal 0.3028619185, gap 2.03e-03, 856 feats in subpb (1668737 left)
Iter 4: primal 0.3028240226, gap 4.32e-04, 836 feats in subpb (1668737 left)
Iter 5: primal 0.3028226442, gap 1.13e-04, 834 feats in subpb (111362 left)
Iter 6: primal 0.3028224684, gap 2.94e-05
Early exit, gap: 2.94e-05 &lt; 1.00e-04
###########################
##### Computing alpha 10/11
###########################
Iter 0: primal 0.2791399004, gap 1.42e-02, 415 feats in subpb (1668737 left)
Iter 1: primal 0.2731227702, gap 8.20e-03, 810 feats in subpb (1668737 left)
Iter 2: primal 0.2724613977, gap 7.25e-03, 1364 feats in subpb (1668737 left)
Iter 3: primal 0.2724299566, gap 1.24e-03, 1642 feats in subpb (1668737 left)
Iter 4: primal 0.2724066200, gap 2.31e-04, 1616 feats in subpb (1668737 left)
Iter 5: primal 0.2724057316, gap 5.91e-05
Early exit, gap: 5.91e-05 &lt; 1.00e-04
###########################
##### Computing alpha 11/11
###########################
Iter 0: primal 0.2443099853, gap 1.11e-02, 813 feats in subpb (1668737 left)
Iter 1: primal 0.2396647865, gap 6.42e-03, 1586 feats in subpb (1668737 left)
Iter 2: primal 0.2390851454, gap 5.84e-03, 2690 feats in subpb (1668737 left)
Iter 3: primal 0.2390731992, gap 9.32e-04, 3086 feats in subpb (1668737 left)
Iter 4: primal 0.2390704863, gap 1.65e-04, 3120 feats in subpb (1668737 left)
Iter 5: primal 0.2390703296, gap 3.85e-05
Early exit, gap: 3.85e-05 &lt; 1.00e-04
##########################
##### Computing alpha 1/11
##########################
Iter 0: primal 0.5000000000, gap 0.00e+00
Early exit, gap: 0.00e+00 &lt; 1.00e-06
##########################
##### Computing alpha 2/11
##########################
Iter 0: primal 0.5000000000, gap 3.35e-02, 1 feats in subpb (1668737 left)
Iter 1: primal 0.4972375400, gap 2.40e-02, 2 feats in subpb (1668737 left)
Iter 2: primal 0.4955922519, gap 1.76e-02, 4 feats in subpb (75790 left)
Iter 3: primal 0.4944363884, gap 9.28e-03, 8 feats in subpb (4100 left)
Iter 4: primal 0.4936142970, gap 9.70e-04, 16 feats in subpb (91 left)
Iter 5: primal 0.4936030427, gap 1.57e-05, 18 feats in subpb (18 left)
Iter 6: primal 0.4936030137, gap 7.59e-07
Early exit, gap: 7.59e-07 &lt; 1.00e-06
##########################
##### Computing alpha 3/11
##########################
Iter 0: primal 0.4804621499, gap 2.97e-02, 12 feats in subpb (1668737 left)
Iter 1: primal 0.4723462125, gap 1.51e-02, 24 feats in subpb (1668737 left)
Iter 2: primal 0.4718631666, gap 6.25e-05, 38 feats in subpb (42 left)
Iter 3: primal 0.4718625966, gap 1.70e-05, 30 feats in subpb (30 left)
Iter 4: primal 0.4718625840, gap 3.75e-06, 24 feats in subpb (24 left)
Iter 5: primal 0.4718625805, gap 1.10e-06, 22 feats in subpb (22 left)
Iter 6: primal 0.4718625793, gap 3.19e-07
Early exit, gap: 3.19e-07 &lt; 1.00e-06
##########################
##### Computing alpha 4/11
##########################
Iter 0: primal 0.4491462052, gap 2.57e-02, 19 feats in subpb (1668737 left)
Iter 1: primal 0.4440634675, gap 1.59e-02, 36 feats in subpb (1668737 left)
Iter 2: primal 0.4434901650, gap 2.18e-03, 64 feats in subpb (3813 left)
Iter 3: primal 0.4434776319, gap 7.25e-05, 72 feats in subpb (82 left)
Iter 4: primal 0.4434770874, gap 9.87e-06, 50 feats in subpb (50 left)
Iter 5: primal 0.4434770130, gap 9.24e-07
Early exit, gap: 9.24e-07 &lt; 1.00e-06
##########################
##### Computing alpha 5/11
##########################
Iter 0: primal 0.4178038750, gap 2.31e-02, 36 feats in subpb (1668737 left)
Iter 1: primal 0.4136505750, gap 1.89e-02, 68 feats in subpb (1668737 left)
Iter 2: primal 0.4133917661, gap 9.88e-04, 96 feats in subpb (3139 left)
Iter 3: primal 0.4133869283, gap 1.61e-04, 98 feats in subpb (274 left)
Iter 4: primal 0.4133867103, gap 2.31e-05, 96 feats in subpb (98 left)
Iter 5: primal 0.4133866405, gap 4.35e-06, 66 feats in subpb (66 left)
Iter 6: primal 0.4133866086, gap 8.85e-07
Early exit, gap: 8.85e-07 &lt; 1.00e-06
##########################
##### Computing alpha 6/11
##########################
Iter 0: primal 0.3875989422, gap 2.10e-02, 48 feats in subpb (1668737 left)
Iter 1: primal 0.3848163733, gap 1.82e-02, 90 feats in subpb (1668737 left)
Iter 2: primal 0.3844647210, gap 8.64e-04, 144 feats in subpb (22356 left)
Iter 3: primal 0.3844578627, gap 1.94e-04, 148 feats in subpb (874 left)
Iter 4: primal 0.3844577136, gap 3.39e-05, 148 feats in subpb (236 left)
Iter 5: primal 0.3844577001, gap 7.76e-06, 139 feats in subpb (139 left)
Iter 6: primal 0.3844576999, gap 9.38e-07
Early exit, gap: 9.38e-07 &lt; 1.00e-06
##########################
##### Computing alpha 7/11
##########################
Iter 0: primal 0.3602221233, gap 1.95e-02, 73 feats in subpb (1668737 left)
Iter 1: primal 0.3576451445, gap 1.69e-02, 140 feats in subpb (1668737 left)
Iter 2: primal 0.3568817718, gap 5.57e-03, 238 feats in subpb (1668737 left)
Iter 3: primal 0.3568367920, gap 1.28e-03, 256 feats in subpb (1668737 left)
Iter 4: primal 0.3568258354, gap 3.73e-04, 252 feats in subpb (22726 left)
Iter 5: primal 0.3568247261, gap 7.12e-05, 250 feats in subpb (868 left)
Iter 6: primal 0.3568246864, gap 1.88e-05, 250 feats in subpb (344 left)
Iter 7: primal 0.3568246853, gap 4.53e-06, 210 feats in subpb (210 left)
Iter 8: primal 0.3568246852, gap 8.01e-07
Early exit, gap: 8.01e-07 &lt; 1.00e-06
##########################
##### Computing alpha 8/11
##########################
Iter 0: primal 0.3330504388, gap 1.78e-02, 125 feats in subpb (1668737 left)
Iter 1: primal 0.3301661736, gap 1.49e-02, 244 feats in subpb (1668737 left)
Iter 2: primal 0.3295840876, gap 3.38e-03, 370 feats in subpb (1668737 left)
Iter 3: primal 0.3295615154, gap 6.02e-04, 390 feats in subpb (1548266 left)
Iter 4: primal 0.3295592930, gap 1.17e-04, 394 feats in subpb (14726 left)
Iter 5: primal 0.3295590900, gap 3.49e-05, 392 feats in subpb (1933 left)
Iter 6: primal 0.3295590862, gap 9.34e-06, 392 feats in subpb (604 left)
Iter 7: primal 0.3295590857, gap 2.77e-06, 360 feats in subpb (360 left)
Iter 8: primal 0.3295590856, gap 8.27e-07
Early exit, gap: 8.27e-07 &lt; 1.00e-06
##########################
##### Computing alpha 9/11
##########################
Iter 0: primal 0.3063156655, gap 1.61e-02, 196 feats in subpb (1668737 left)
Iter 1: primal 0.3036386782, gap 1.34e-02, 384 feats in subpb (1668737 left)
Iter 2: primal 0.3029507109, gap 8.32e-03, 592 feats in subpb (1668737 left)
Iter 3: primal 0.3028354178, gap 2.05e-03, 840 feats in subpb (1668737 left)
Iter 4: primal 0.3028235581, gap 4.73e-04, 834 feats in subpb (1668737 left)
Iter 5: primal 0.3028225993, gap 1.16e-04, 824 feats in subpb (118633 left)
Iter 6: primal 0.3028224647, gap 2.88e-05, 824 feats in subpb (8961 left)
Iter 7: primal 0.3028224520, gap 7.12e-06, 822 feats in subpb (2062 left)
Iter 8: primal 0.3028224512, gap 2.08e-06, 830 feats in subpb (985 left)
Iter 9: primal 0.3028224510, gap 6.07e-07
Early exit, gap: 6.07e-07 &lt; 1.00e-06
###########################
##### Computing alpha 10/11
###########################
Iter 0: primal 0.2791303543, gap 1.42e-02, 416 feats in subpb (1668737 left)
Iter 1: primal 0.2732154549, gap 8.25e-03, 812 feats in subpb (1668737 left)
Iter 2: primal 0.2724367686, gap 6.96e-03, 1354 feats in subpb (1668737 left)
Iter 3: primal 0.2724129539, gap 1.59e-03, 1628 feats in subpb (1668737 left)
Iter 4: primal 0.2724062333, gap 4.37e-04, 1624 feats in subpb (1668737 left)
Iter 5: primal 0.2724057610, gap 7.43e-05, 1626 feats in subpb (234590 left)
Iter 6: primal 0.2724057128, gap 1.87e-05, 1624 feats in subpb (19564 left)
Iter 7: primal 0.2724057109, gap 5.49e-06, 1624 feats in subpb (4953 left)
Iter 8: primal 0.2724057106, gap 1.44e-06, 1624 feats in subpb (2114 left)
Iter 9: primal 0.2724057106, gap 3.77e-07
Early exit, gap: 3.77e-07 &lt; 1.00e-06
###########################
##### Computing alpha 11/11
###########################
Iter 0: primal 0.2443033697, gap 1.10e-02, 812 feats in subpb (1668737 left)
Iter 1: primal 0.2396737702, gap 6.35e-03, 1598 feats in subpb (1668737 left)
Iter 2: primal 0.2390888195, gap 5.77e-03, 2710 feats in subpb (1668737 left)
Iter 3: primal 0.2390715698, gap 1.65e-03, 3122 feats in subpb (1668737 left)
Iter 4: primal 0.2390705663, gap 4.60e-04, 3118 feats in subpb (1668737 left)
Iter 5: primal 0.2390703460, gap 1.09e-04, 3128 feats in subpb (1668737 left)
Iter 6: primal 0.2390703271, gap 3.25e-05, 3122 feats in subpb (202068 left)
Iter 7: primal 0.2390703259, gap 9.10e-06, 3122 feats in subpb (27638 left)
Iter 8: primal 0.2390703258, gap 1.59e-06, 3122 feats in subpb (5636 left)
Iter 9: primal 0.2390703258, gap 4.29e-07
Early exit, gap: 4.29e-07 &lt; 1.00e-06
</pre></div>
</div>
<p>Measure the influence of regularization on the sparsity of the solutions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="matplotlib.pyplot.subplots" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">figsize</span></a><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">constrained_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html#matplotlib.pyplot.bar" title="matplotlib.pyplot.bar" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">bar</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html#numpy.arange" title="numpy.arange" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">arange</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_alphas</span></a><span class="p">),</span> <span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">coefs</span></a> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.title.html#matplotlib.pyplot.title" title="matplotlib.pyplot.title" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">title</span></a><span class="p">(</span><span class="s2">&quot;Sparsity of solution along regularization path&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$||\hat w||_0$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$\lambda / \lambda_{\mathrm</span><span class="si">{max}</span><span class="s2">}$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_yscale.html#matplotlib.axes.Axes.set_yscale" title="matplotlib.axes.Axes.set_yscale" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span></a><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xticks.html#matplotlib.axes.Axes.set_xticks" title="matplotlib.axes.Axes.set_xticks" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html#numpy.arange" title="numpy.arange" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">arange</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">n_alphas</span></a><span class="p">)[::</span><span class="mi">2</span><span class="p">])</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xticklabels.html#matplotlib.axes.Axes.set_xticklabels" title="matplotlib.axes.Axes.set_xticklabels" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span></a><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="matplotlib.pyplot.show" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">show</span></a><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Sparsity of solution along regularization path" class="sphx-glr-single-img" src="../_images/sphx_glr_plot_finance_path_002.png" />
<p>Check convergence guarantees: gap is inferior to tolerance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">gaps</span><span class="o">.</span><span class="n">T</span></a><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">r</span><span class="s2">&quot;tol=</span><span class="si">%.0e</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a><span class="p">))</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a> <span class="o">/</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="numpy.ndarray" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">alphas</span></a><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">figsize</span></a><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s2">&quot;duality gap reached&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;$\lambda / \lambda_{\mathrm</span><span class="si">{max}</span><span class="s2">}$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_yscale.html#matplotlib.axes.Axes.set_yscale" title="matplotlib.axes.Axes.set_yscale" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span></a><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_yticks.html#matplotlib.axes.Axes.set_yticks" title="matplotlib.axes.Axes.set_yticks" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tols</span></a><span class="p">)</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.tight_layout.html#matplotlib.pyplot.tight_layout" title="matplotlib.pyplot.tight_layout" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span></a><span class="p">()</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="matplotlib.pyplot.show" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">show</span></a><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="plot finance path" class="sphx-glr-single-img" src="../_images/sphx_glr_plot_finance_path_003.png" />
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 1 minutes  44.322 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plot-finance-path-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/1e2b507d59f5c81fd7116ff6c187df47/plot_finance_path.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_finance_path.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/81d5dd0c6075bc38425217155f0b6749/plot_finance_path.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_finance_path.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


</div>

<!-- Github "fork me" ribbon -->
<a href="https://github.com/mathurinm/celer"><img style="position: absolute; top: 50px; right: 0; border: 0;"
src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67"
alt="Fork me on GitHub"
data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Mathurin Massias.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>